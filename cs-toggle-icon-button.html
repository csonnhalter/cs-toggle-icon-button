<link rel="import" href="/bower_components/polymer/polymer-element.html">
<link rel="import" href="/bower_components/polymer/lib/mixins/gesture-event-listeners.html">

<link rel="import" href="./default-icons.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/neon-animation/web-animations.html">
<link rel="import" href="/bower_components/paper-tooltip/paper-tooltip.html">



<dom-module id="cs-toggle-icon-button">
	<template>
		<style>
			:host{
				--tt-background: var(--toggle-button-tip-background,var(--paper-tooltip-background));
				--tt-opacity: var(--toggle-button-tip-opacity,var(--paper-tooltip-opacity));
				--tt-text-color: var(--toggle-button-tip-text-color, var(--paper-tooltip-text-color));					
			}
		
			paper-icon-button.do{
				color:var(--toggle-button-do-color,black);
			}

			paper-icon-button.done{
				color:var(--toggle-button-done-color,black);
			}

			paper-tooltip{
			--paper-tooltip-background: var(--tt-background, white);	
			--paper-tooltip-opacity:	var(--tt-opacity, 0.9);
			--paper-tooltip-text-color:var(--tt-text-color, black); 
			box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
			border-radius: 2px;
			}	
		</style>

		<paper-icon-button id="tog" class$="[[mode]]" icon="[[_ModeIcon]]" noink on-tap="_toggle"></paper-icon-button>
		<paper-tooltip for="tog" position="right">[[tip]]</paper-tooltip>

	</template>
	
	<script>
		class  CsToggleIconButton extends Polymer.GestureEventListeners(Polymer.Element) {

			static get is() { return 'cs-toggle-icon-button'; }

			static get properties() {
				return {
					doIcon:{
						type:String,
						value: "expand-more"
					},
					doneIcon:{
						type:String,
						value:"expand-less"
					},
					notoggle:{
						type:Boolean,
						value:false
					},
					tip:{
						type:String
					},
					mode:{
						type: String,
						value:"do",
						reflectToAttribute: true,
						readOnly:true
					},
					// _mode:{
					// 	type: String,
					// 	value: "do"
					// },
					_ModeIcon:{
						type: String,
						value:"expand-more"
					},
					_ModeIsDone:{
						type: Boolean,
						value:false
					}
				}
			}

			_toggle(){
				// debugger;
				if(!this.notoggle){
					this._ModeIsDone=!this._ModeIsDone;
					if(this._ModeIsDone){
						this._setMode("done");
						this._ModeIcon=this.doneIcon;
					} else{
						this._setMode("do");
						this._ModeIcon=this.doIcon;
					};
				};
			}

			ready(){
				super.ready();
				if(this.mode == "done"){
					this._ModeIcon=this.doneIcon;
					this._ModeIsDone=true;
				}else{
					// if mode's not valid initially set to do
					this._setMode("do");
					this._ModeIcon = this.doIcon;					
				}
				// if(this.notoggle){
				// 	this._ModeIsDone=true;
				// 	this.mode="done";
				// 	this.ModeIcon=this.icons.done;
				// } else{
				// 	this.ModeIcon=this.icons.do;
				// };
			}
		}
		// Register custom element definition using standard platform API
		customElements.define(CsToggleIconButton.is, CsToggleIconButton);
	</script>
</dom-module>
